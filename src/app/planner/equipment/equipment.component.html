<div fxLayout="column" fxLayoutGap="32px">
  <!-- Weapons -->
  <div fxFlex fxLayout="column" fxLayoutGap="32px">
    <app-divider-header [label]="'Weapons'"></app-divider-header>

    <div fxLayout="row" fxLayoutGap="32px" [formGroup]="plannerForm">
      <!-- Main Hand -->
      <span class="p-float-label w-full equipment-selector">
        <p-dropdown
          inputId="selector"
          formControlName="mainHand"
          [showClear]="true"
          [options]="weapons"
          optionLabel="name"
          dataKey="id"
          scrollHeight="200px"
          [autoDisplayFirst]="false"
          [filter]="true"
          filterBy="name"
        >
        </p-dropdown>
        <label for="selector">Main Hand</label>
      </span>

      <!-- Off Hand -->
      <span class="p-float-label w-full equipment-selector">
        <p-dropdown
          inputId="selector"
          formControlName="offHand"
          [showClear]="true"
          [options]="weapons"
          optionLabel="name"
          dataKey="id"
          scrollHeight="200px"
          [autoDisplayFirst]="false"
          [filter]="true"
          filterBy="name"
        >
        </p-dropdown>
        <label for="selector">Off Hand</label>
      </span>
    </div>
  </div>

  <div fxLayout.lt-md="column" fxLayout="row" fxLayoutGap="32px">
    <!-- Armor -->
    <div fxFlex fxLayout="column" fxLayoutGap="32px">
      <app-divider-header [label]="'Armor'"></app-divider-header>
      <ng-container
        *ngFor="let form of plannerForm.controls.armors.controls"
        [ngTemplateOutlet]="armorSelector"
        [ngTemplateOutletContext]="{ form: form }"
      ></ng-container>
    </div>

    <!-- Trinkets -->
    <div fxFlex fxLayout="column" fxLayoutGap="32px">
      <app-divider-header [label]="'Items'"></app-divider-header>
      <ng-container
        *ngFor="let form of plannerForm.controls.trinkets.controls"
        [ngTemplateOutlet]="armorSelector"
        [ngTemplateOutletContext]="{ form: form }"
      ></ng-container>
    </div>
  </div>
</div>

<!-- Armor Selector -->
<ng-template #armorSelector let-form="form">
  <span class="p-float-label w-full equipment-selector" [formGroup]="form">
    <p-dropdown
      inputId="selector"
      formControlName="equipment"
      [showClear]="true"
      [options]="armorsByType[form.controls.type.value]"
      optionLabel="name"
      dataKey="id"
      scrollHeight="200px"
      [autoDisplayFirst]="false"
      [filter]="true"
      filterBy="name"
    >
    </p-dropdown>
    <label for="selector">{{ form.controls.name.value | label }}</label>
  </span>
</ng-template>
